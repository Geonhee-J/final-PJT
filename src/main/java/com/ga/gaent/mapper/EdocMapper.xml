<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ga.gaent.mapper.EdocMapper">

    <select id="selectEdocType" resultType="com.ga.gaent.vo.EdocFormTypeVO">
        SELECT
            edoc_type edocType,
            edoc_form_title edocFormTitle,
            edoc_form_desc edocFormDesc,
            edoc_form_create_date edocFormCreateDate,
            edoc_form_update_date edocFormUpdateDate
        FROM
            edoc_form_type
    </select>
    
    <select id="selectApprover" resultType="com.ga.gaent.vo.EmpVO">
        SELECT
            emp_code empCode,
            team_code teamCode,
            rank_code rankCode,
            emp_kor_name korName
        FROM
            emp
    </select>
    
    <insert id="insertEdoc" parameterType="com.ga.gaent.dto.EdocRequestDTO" useGeneratedKeys="true" keyProperty="edocNum">
        INSERT INTO
            edoc(
                edoc_type,
                edoc_writer,
                edoc_enroll_date
            ) VALUES(
                #{edocType},
                #{edocWriter},
                NOW()
            )
    </insert>
    
    <insert id="insertEdocFile" parameterType="Map">
        INSERT INTO
            edoc_file(
                file_name,
                original_file_name,
                file_type,
                file_size,
            ) VALUES(
                #{fileName},
                #{orginalFileName},
                #{fileType},
                #{fileSize}
            )
    </insert>
    
    <insert id="insertEdocDraft" parameterType="com.ga.gaent.dto.EdocRequestDTO">
        INSERT INTO
            edoc_draft(
                edoc_num,
                prop_start_date,
                prop_end_date,
                prop_title,
                prop_content
            ) VALUES(
                #{edocNum},
                #{propStartDate},
                #{propEndDate},
                #{propTitle},
                #{propContent}
            )
    </insert>
    
    <insert id="insertApprover" parameterType="Map">
        INSERT INTO
            edoc_approval(
                edoc_num,
                approver,
                appr_order,
                appr_date
            ) VALUES(
                #{edocNum},
                #{approver},
                #{apprOrder},
                NOW()
            )
    </insert>

</mapper>